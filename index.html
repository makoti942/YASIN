<!doctype html>
<html lang="en" dir="auto">
    <head>
        <meta charset="UTF-8" />
        <link rel="icon" type="image/png" href="/makoti-logo.png" />
        <link rel="apple-touch-icon" href="/makoti-logo.png" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover" />
        <title>Makoti Traders | Premium Bot</title>
        
        <style>
            :root { font-size: 62.5%; }

            /* 1. THEME BASE */
            .blocklyMainBackground, .injectionDiv, .body.theme--light {
                background-color: #000000 !important;
                fill: #000000 !important;
            }

            /* LOGO HEADER */
            #makoti-header {
                width: 100%;
                background: #000000;
                padding: 10px;
                text-align: center;
                border-bottom: 2px solid #00d9ff;
            }
            #makoti-header img { height: 45px; }

            /* 2. TEXT COLORS */
            .blocklyText { fill: #00d9ff !important; } /* Default blue for labels */

            /* 3. LOSS AMOUNT FIX (TARGETS ONLY THE NUMBER) */
            /* We target the specific SVG text that Deriv uses for contract results */
            svg .blocklyText[style*="fill: rgb(204, 0, 0)"], 
            svg .blocklyText[style*="fill: #cc0000"] {
                fill: #ff444f !important; /* Vivid Red */
            }

            /* STOP BUTTON */
            .makoti-stop-btn {
                background-color: #ff444f !important;
                box-shadow: 0 0 15px #ff444f !important;
                color: white !important;
            }
        </style>
    </head>

    <body class="body theme theme--light">
        <div id="makoti-header">
            <img src="/makoti-logo.png" alt="Makoti Traders">
        </div>

        <div id="root"></div>
        
        <script>
            // --- MAKOTI TRADERS SURGICAL COLOR ENGINE ---
            const colorEngine = new MutationObserver(() => {
                
                // A. THE STOP BUTTON
                document.querySelectorAll('button').forEach(btn => {
                    if (btn.textContent.toLowerCase().includes('stop')) {
                        btn.classList.add('makoti-stop-btn');
                    }
                });

                // B. THE LOSS AMOUNT TARGETER
                // This scans all text elements for the minus sign specifically
                const allTexts = document.querySelectorAll('.blocklyText, .dc-stat__value, span');
                
                allTexts.forEach(el => {
                    const text = el.textContent.trim();
                    
                    // TARGET ONLY LOSS AMOUNTS (Numbers with a minus sign)
                    if (text.includes('-')) {
                        el.style.setProperty('fill', '#ff444f', 'important');
                        el.style.setProperty('color', '#ff444f', 'important');
                    } 
                    // LEAVE WINS ALONE (Keep them your default Matrix Green/Blue)
                    else if (text.includes('+') || (parseFloat(text) > 0 && text.includes('$'))) {
                        el.style.setProperty('fill', '#00ff41', 'important');
                        el.style.setProperty('color', '#00ff41', 'important');
                    }
                });
            });

            colorEngine.observe(document.body, { 
                childList: true, 
                subtree: true, 
                characterData: true 
            });

            // Browser Tab Logo Refresh
            setInterval(() => {
                const link = document.querySelector("link[rel*='icon']");
                if (link && !link.href.includes('makoti-logo.png')) {
                    link.href = "/makoti-logo.png";
                }
            }, 3000);
        </script>
    </body>
</html>
